
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
        <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Nilearn: Machine learning for NeuroImaging in Python &#8212; Machine learning for NeuroImaging</title>
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/gallery.css" type="text/css" />
    <script type="text/javascript" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="8.2.1. Basic Atlas plotting" href="01_plotting/plot_atlas.html" />
    <link rel="prev" title="8.1.3. 3D and 4D niimgs: handling and visualizing" href="plot_3d_and_4d_niimg.html" />
<meta content="True" name="HandheldFriendly">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
<meta name="keywords" content="nilearn, neuroimaging, python, neuroscience, machinelearning">
<script type="text/javascript">
$(function () {
    // Lock the table of content to a fixed position once we scroll enough
    var top = 105 + $('.sphinxsidebarwrapper').offset().top - parseFloat($('.sphinxsidebarwrapper').css('margin-top').replace(/auto/, 0)),
        sections = {},
        i        = 0,
	url	 = document.URL.replace(/#.*$/, ""),
	current_section = 0;

    // Grab positions of our sections
    $('.headerlink').each(function(){
        sections[this.href.replace(url, '')] = $(this).offset().top - 50;
    });

    $(window).scroll(function(event) {
	var pos   = $(window).scrollTop();
	// Lock the table of content to a fixed position once we scroll enough
	if(pos > top){
	    //begin to scroll
	    $('.sphinxsidebarwrapper').css("position", "fixed");
	    $('.sphinxsidebarwrapper').css("top", -105);
	}
	else{
	    //lock it back into place
	    $('.sphinxsidebarwrapper').css("position", "relative");
	    $('.sphinxsidebarwrapper').css("top",0);
	}

	// Highlight the current section
	$('a.internal').removeClass('active');
        for(i in sections){
            if(sections[i] > pos){
		break;
            };
	    if($('a.internal[href$="' + i + '"]').is(':visible')){
		current_section = i;
	    };
        }
	$('a.internal[href$="' + current_section + '"]').addClass('active');
    });

});
</script>


<script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-41920728-1']);
        _gaq.push(['_trackPageview']);

        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>

  </head><body>
<div id="logo-banner">
  <div class="logo">
    <a href="../index.html">
      <img src="../_static/nilearn-logo.png" alt="Nilearn logo"  border="0" />
    </a>
  </div>
  <!-- A tag cloud to make it easy for people to find what they are
                         looking for -->
 <div class="tags">
  <ul>
    <li>
      <big><a href="decoding/plot_haxby_anova_svm.html">SVM</a></big>
    </li>
    <li>
      <small><a href="../connectivity/parcellating.html">Ward
          clustering</a></small>
    </li>
    <li>
      <a href="../decoding/searchlight.html">Searchlight</a>
    </li>
    <li>
      <big><a href="../connectivity/resting_state_networks.html">ICA</a></big>
    </li>
    <li>
      <a href="../manipulating_images/data_preparation.html">Nifti IO</a>
    </li>
    <li>
      <a href="../modules/reference.html#module-nilearn.datasets">Datasets</a>
    </li>
  </ul>
 </div>

  <div class="banner">
    <h1>Nilearn:</h1>
    <h2>Machine learning for Neuro-Imaging in Python</h2>
  </div>
  <div class="search_form">
    <div class="gcse-search" id="cse" style="width: 100%;"></div>
    <script>
      (function() {
        var cx = '017289614950330089114:elrt9qoutrq';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
  </div>
</div>



    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a></li>
        <li class="right" >
          <a href="01_plotting/plot_atlas.html" title="8.2.1. Basic Atlas plotting"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="plot_3d_and_4d_niimg.html" title="8.1.3. 3D and 4D niimgs: handling and visualizing"
             accesskey="P">previous</a> |</li>
<li><a href="../index.html">Nilearn Home</a> |&nbsp;</li>
<li><a href="../user_guide.html">User Guide</a> |&nbsp;</li>
<li><a href="index.html">Examples</a> |&nbsp;</li>
<li><a href="../modules/reference.html">Reference</a> |&nbsp;</li>
<li id="navbar-about"><a href="../authors.html">About</a>|&nbsp;</li>
<li id="navbar-ecosystem"><a href="http://www.nipy.org/">Nipy ecosystem</a></li>

          <li class="nav-item nav-item-1"><a href="../user_guide.html" >User guide: table of contents</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">8. Nilearn usage examples</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">


<h4> Giving credit </h4>
  <ul class="simple">
    <li><p>Please consider <a href="../authors.html#citing">citing the
                    papers</a>.</p></li>
  </ul>

  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">8.1.4. A introduction tutorial to fMRI decoding</a><ul>
<li><a class="reference internal" href="#retrieve-and-load-the-fmri-data-from-the-haxby-study">8.1.4.1. Retrieve and load the fMRI data from the  Haxby study</a><ul>
<li><a class="reference internal" href="#first-download-the-data">8.1.4.1.1. First download the data</a></li>
<li><a class="reference internal" href="#convert-the-fmri-volume-s-to-a-data-matrix">8.1.4.1.2. Convert the fMRI volume’s to a data matrix</a></li>
<li><a class="reference internal" href="#load-the-behavioral-labels">8.1.4.1.3. Load the behavioral labels</a></li>
<li><a class="reference internal" href="#restrict-the-analysis-to-cats-and-faces">8.1.4.1.4. Restrict the analysis to cats and faces</a></li>
</ul>
</li>
<li><a class="reference internal" href="#decoding-with-an-svm">8.1.4.2. Decoding with an SVM</a></li>
<li><a class="reference internal" href="#measuring-prediction-scores-using-cross-validation">8.1.4.3. Measuring prediction scores using cross-validation</a><ul>
<li><a class="reference internal" href="#manually-leaving-out-data">8.1.4.3.1. Manually leaving out data</a></li>
<li><a class="reference internal" href="#implementing-a-kfold-loop">8.1.4.3.2. Implementing a KFold loop</a></li>
<li><a class="reference internal" href="#cross-validation-with-scikit-learn">8.1.4.3.3. Cross-validation with scikit-learn</a></li>
</ul>
</li>
<li><a class="reference internal" href="#inspecting-the-model-weights">8.1.4.4. Inspecting the model weights</a><ul>
<li><a class="reference internal" href="#turning-the-weights-into-a-nifti-image">8.1.4.4.1. Turning the weights into a nifti image</a></li>
<li><a class="reference internal" href="#plotting-the-svm-weights">8.1.4.4.2. Plotting the SVM weights</a></li>
</ul>
</li>
<li><a class="reference internal" href="#further-reading">8.1.4.5. Further reading</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="plot_3d_and_4d_niimg.html"
                        title="previous chapter">8.1.3. 3D and 4D niimgs: handling and visualizing</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="01_plotting/plot_atlas.html"
                        title="next chapter">8.2.1. Basic Atlas plotting</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="a-introduction-tutorial-to-fmri-decoding">
<span id="sphx-glr-auto-examples-plot-decoding-tutorial-py"></span><h1>8.1.4. A introduction tutorial to fMRI decoding<a class="headerlink" href="#a-introduction-tutorial-to-fmri-decoding" title="Permalink to this headline">¶</a></h1>
<p>Here is a simple tutorial on decoding with nilearn. It reproduces the
Haxby 2001 study on a face vs cat discrimination task in a mask of the
ventral stream.</p>
<p>This tutorial is meant as an introduction to the various steps of a
decoding analysis.</p>
<p>It is not a minimalistic example, as it strives to be didactic. It is not
meant to be copied to analyze new data: many of the steps are unecessary.</p>
<div class="contents local topic" id="contents">
<p class="topic-title first"><strong>Contents</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#retrieve-and-load-the-fmri-data-from-the-haxby-study" id="id1">Retrieve and load the fMRI data from the  Haxby study</a></li>
<li><a class="reference internal" href="#decoding-with-an-svm" id="id2">Decoding with an SVM</a></li>
<li><a class="reference internal" href="#measuring-prediction-scores-using-cross-validation" id="id3">Measuring prediction scores using cross-validation</a></li>
<li><a class="reference internal" href="#inspecting-the-model-weights" id="id4">Inspecting the model weights</a></li>
<li><a class="reference internal" href="#further-reading" id="id5">Further reading</a></li>
</ul>
</div>
<div class="section" id="retrieve-and-load-the-fmri-data-from-the-haxby-study">
<h2><a class="toc-backref" href="#id1">8.1.4.1. Retrieve and load the fMRI data from the  Haxby study</a><a class="headerlink" href="#retrieve-and-load-the-fmri-data-from-the-haxby-study" title="Permalink to this headline">¶</a></h2>
<div class="section" id="first-download-the-data">
<h3>8.1.4.1.1. First download the data<a class="headerlink" href="#first-download-the-data" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="../modules/generated/nilearn.datasets.fetch_haxby.html#nilearn.datasets.fetch_haxby" title="nilearn.datasets.fetch_haxby"><code class="xref py py-func docutils literal notranslate"><span class="pre">nilearn.datasets.fetch_haxby</span></code></a> function will download the
Haxby dataset if not present on the disk, in the nilearn data directory.
It can take a while to download about 310 Mo of data from the Internet.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">nilearn</span> <span class="kn">import</span> <span class="n">datasets</span>
<span class="c1"># By default 2nd subject will be fetched</span>
<span class="n">haxby_dataset</span> <span class="o">=</span> <a href="../modules/generated/nilearn.datasets.fetch_haxby.html#nilearn.datasets.fetch_haxby" title="View documentation for nilearn.datasets.fetch_haxby"><span class="n">datasets</span><span class="o">.</span><span class="n">fetch_haxby</span></a><span class="p">()</span>
<span class="c1"># &#39;func&#39; is a list of filenames: one for each subject</span>
<span class="n">fmri_filename</span> <span class="o">=</span> <span class="n">haxby_dataset</span><span class="o">.</span><span class="n">func</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="c1"># print basic information on the dataset</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;First subject functional nifti images (4D) are at: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span>
      <span class="n">fmri_filename</span><span class="p">)</span>  <span class="c1"># 4D data</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Dataset</span> <span class="n">created</span> <span class="ow">in</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">kamalakar</span><span class="o">/</span><span class="n">nilearn_data</span><span class="o">/</span><span class="n">haxby2001</span>

<span class="n">Downloading</span> <span class="n">data</span> <span class="kn">from</span> <span class="nn">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">nitrc</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">frs</span><span class="o">/</span><span class="n">download</span><span class="o">.</span><span class="n">php</span><span class="o">/</span><span class="mi">7868</span><span class="o">/</span><span class="n">mask</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span> <span class="o">...</span>
<span class="n">Downloading</span> <span class="n">data</span> <span class="kn">from</span> <span class="nn">http</span><span class="p">:</span><span class="o">//</span><span class="n">data</span><span class="o">.</span><span class="n">pymvpa</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">datasets</span><span class="o">/</span><span class="n">haxby2001</span><span class="o">/</span><span class="n">MD5SUMS</span> <span class="o">...</span>
<span class="n">Downloading</span> <span class="n">data</span> <span class="kn">from</span> <span class="nn">http</span><span class="p">:</span><span class="o">//</span><span class="n">data</span><span class="o">.</span><span class="n">pymvpa</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">datasets</span><span class="o">/</span><span class="n">haxby2001</span><span class="o">/</span><span class="n">subj2</span><span class="o">-</span><span class="mf">2010.01</span><span class="o">.</span><span class="mf">14.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span> <span class="o">...</span>
<span class="n">First</span> <span class="n">subject</span> <span class="n">functional</span> <span class="n">nifti</span> <span class="n">images</span> <span class="p">(</span><span class="mi">4</span><span class="n">D</span><span class="p">)</span> <span class="n">are</span> <span class="n">at</span><span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">kamalakar</span><span class="o">/</span><span class="n">nilearn_data</span><span class="o">/</span><span class="n">haxby2001</span><span class="o">/</span><span class="n">subj2</span><span class="o">/</span><span class="n">bold</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span>
</pre></div>
</div>
</div>
<div class="section" id="convert-the-fmri-volume-s-to-a-data-matrix">
<h3>8.1.4.1.2. Convert the fMRI volume’s to a data matrix<a class="headerlink" href="#convert-the-fmri-volume-s-to-a-data-matrix" title="Permalink to this headline">¶</a></h3>
<p>We will use the <a class="reference internal" href="../modules/generated/nilearn.input_data.NiftiMasker.html#nilearn.input_data.NiftiMasker" title="nilearn.input_data.NiftiMasker"><code class="xref py py-class docutils literal notranslate"><span class="pre">nilearn.input_data.NiftiMasker</span></code></a> to extract the
fMRI data on a mask and convert it to data series.</p>
<p>The mask is a mask of the Ventral Temporal streaming coming from the
Haxby study:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mask_filename</span> <span class="o">=</span> <span class="n">haxby_dataset</span><span class="o">.</span><span class="n">mask_vt</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="c1"># Let&#39;s visualize it, using the subject&#39;s anatomical image as a</span>
<span class="c1"># background</span>
<span class="kn">from</span> <span class="nn">nilearn</span> <span class="kn">import</span> <span class="n">plotting</span>
<a href="../modules/generated/nilearn.plotting.plot_roi.html#nilearn.plotting.plot_roi" title="View documentation for nilearn.plotting.plot_roi"><span class="n">plotting</span><span class="o">.</span><span class="n">plot_roi</span></a><span class="p">(</span><span class="n">mask_filename</span><span class="p">,</span> <span class="n">bg_img</span><span class="o">=</span><span class="n">haxby_dataset</span><span class="o">.</span><span class="n">anat</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                 <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;Paired&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../_images/sphx_glr_plot_decoding_tutorial_001.png" class="align-center" src="../_images/sphx_glr_plot_decoding_tutorial_001.png" />
<p>Now we use the NiftiMasker.</p>
<p>We first create a masker, giving it the options that we care
about. Here we use standardizing of the data, as it is often important
for decoding</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">nilearn.input_data</span> <span class="kn">import</span> <a href="../modules/generated/nilearn.input_data.NiftiMasker.html#nilearn.input_data.NiftiMasker" title="View documentation for nilearn.input_data.NiftiMasker"><span class="n">NiftiMasker</span></a>
<span class="n">masker</span> <span class="o">=</span> <a href="../modules/generated/nilearn.input_data.NiftiMasker.html#nilearn.input_data.NiftiMasker" title="View documentation for nilearn.input_data.NiftiMasker"><span class="n">NiftiMasker</span></a><span class="p">(</span><span class="n">mask_img</span><span class="o">=</span><span class="n">mask_filename</span><span class="p">,</span> <span class="n">standardize</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c1"># We give the masker a filename and retrieve a 2D array ready</span>
<span class="c1"># for machine learning with scikit-learn</span>
<span class="n">fmri_masked</span> <span class="o">=</span> <span class="n">masker</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">fmri_filename</span><span class="p">)</span>
</pre></div>
</div>
<p>The variable “fmri_masked” is a numpy array:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="n">fmri_masked</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span> <span class="mf">7.6757914e-01</span>  <span class="mf">2.3108709e+00</span> <span class="o">-</span><span class="mf">2.0519446e-01</span> <span class="o">...</span> <span class="o">-</span><span class="mf">1.0261141e+00</span>
   <span class="mf">8.7993503e-02</span>  <span class="mf">2.0720530e+00</span><span class="p">]</span>
 <span class="p">[</span> <span class="mf">5.5640829e-01</span>  <span class="mf">1.6833442e+00</span> <span class="o">-</span><span class="mf">2.4644940e-01</span> <span class="o">...</span> <span class="o">-</span><span class="mf">7.0238096e-01</span>
  <span class="o">-</span><span class="mf">3.4570050e-01</span>  <span class="mf">2.0341012e+00</span><span class="p">]</span>
 <span class="p">[</span> <span class="mf">7.6757914e-01</span>  <span class="mf">1.9186667e+00</span>  <span class="mf">1.0802227e-03</span> <span class="o">...</span> <span class="o">-</span><span class="mf">9.9374086e-01</span>
  <span class="o">-</span><span class="mf">2.7630946e-01</span>  <span class="mf">2.1479564e+00</span><span class="p">]</span>
 <span class="o">...</span>
 <span class="p">[</span><span class="o">-</span><span class="mf">4.2905572e-01</span> <span class="o">-</span><span class="mf">1.6896113e+00</span> <span class="o">-</span><span class="mf">7.4150860e-01</span> <span class="o">...</span> <span class="o">-</span><span class="mf">1.5440873e+00</span>
   <span class="mf">1.8054218e+00</span> <span class="o">-</span><span class="mf">1.6709729e-01</span><span class="p">]</span>
 <span class="p">[</span><span class="o">-</span><span class="mf">1.4749458e-01</span> <span class="o">-</span><span class="mf">1.8072726e+00</span> <span class="o">-</span><span class="mf">2.4644940e-01</span> <span class="o">...</span> <span class="o">-</span><span class="mf">1.7707006e+00</span>
   <span class="mf">1.5452055e+00</span>  <span class="mf">7.8169519e-01</span><span class="p">]</span>
 <span class="p">[</span><span class="o">-</span><span class="mf">2.1788488e-01</span> <span class="o">-</span><span class="mf">1.4542887e+00</span>  <span class="mf">1.0802227e-03</span> <span class="o">...</span> <span class="o">-</span><span class="mf">1.6412073e+00</span>
   <span class="mf">1.2676412e+00</span>  <span class="mf">8.9555031e-01</span><span class="p">]]</span>
</pre></div>
</div>
<p>Its shape corresponds to the number of time-points times the number of
voxels in the mask</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="n">fmri_masked</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="mi">1452</span><span class="p">,</span> <span class="mi">464</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="load-the-behavioral-labels">
<h3>8.1.4.1.3. Load the behavioral labels<a class="headerlink" href="#load-the-behavioral-labels" title="Permalink to this headline">¶</a></h3>
<p>The behavioral labels are stored in a CSV file, separated by spaces.</p>
<p>We use pandas to load them in an array.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="c1"># Load behavioral information</span>
<span class="n">behavioral</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">haxby_dataset</span><span class="o">.</span><span class="n">session_target</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">behavioral</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">labels</span>  <span class="n">chunks</span>
<span class="mi">0</span>         <span class="n">rest</span>       <span class="mi">0</span>
<span class="mi">1</span>         <span class="n">rest</span>       <span class="mi">0</span>
<span class="mi">2</span>         <span class="n">rest</span>       <span class="mi">0</span>
<span class="mi">3</span>         <span class="n">rest</span>       <span class="mi">0</span>
<span class="mi">4</span>         <span class="n">rest</span>       <span class="mi">0</span>
<span class="mi">5</span>         <span class="n">rest</span>       <span class="mi">0</span>
<span class="mi">6</span>     <span class="n">scissors</span>       <span class="mi">0</span>
<span class="mi">7</span>     <span class="n">scissors</span>       <span class="mi">0</span>
<span class="mi">8</span>     <span class="n">scissors</span>       <span class="mi">0</span>
<span class="mi">9</span>     <span class="n">scissors</span>       <span class="mi">0</span>
<span class="mi">10</span>    <span class="n">scissors</span>       <span class="mi">0</span>
<span class="mi">11</span>    <span class="n">scissors</span>       <span class="mi">0</span>
<span class="mi">12</span>    <span class="n">scissors</span>       <span class="mi">0</span>
<span class="mi">13</span>    <span class="n">scissors</span>       <span class="mi">0</span>
<span class="mi">14</span>    <span class="n">scissors</span>       <span class="mi">0</span>
<span class="mi">15</span>        <span class="n">rest</span>       <span class="mi">0</span>
<span class="mi">16</span>        <span class="n">rest</span>       <span class="mi">0</span>
<span class="mi">17</span>        <span class="n">rest</span>       <span class="mi">0</span>
<span class="mi">18</span>        <span class="n">rest</span>       <span class="mi">0</span>
<span class="mi">19</span>        <span class="n">rest</span>       <span class="mi">0</span>
<span class="mi">20</span>        <span class="n">rest</span>       <span class="mi">0</span>
<span class="mi">21</span>        <span class="n">face</span>       <span class="mi">0</span>
<span class="mi">22</span>        <span class="n">face</span>       <span class="mi">0</span>
<span class="mi">23</span>        <span class="n">face</span>       <span class="mi">0</span>
<span class="mi">24</span>        <span class="n">face</span>       <span class="mi">0</span>
<span class="mi">25</span>        <span class="n">face</span>       <span class="mi">0</span>
<span class="mi">26</span>        <span class="n">face</span>       <span class="mi">0</span>
<span class="mi">27</span>        <span class="n">face</span>       <span class="mi">0</span>
<span class="mi">28</span>        <span class="n">face</span>       <span class="mi">0</span>
<span class="mi">29</span>        <span class="n">face</span>       <span class="mi">0</span>
<span class="o">...</span>        <span class="o">...</span>     <span class="o">...</span>
<span class="mi">1422</span>      <span class="n">rest</span>      <span class="mi">11</span>
<span class="mi">1423</span>       <span class="n">cat</span>      <span class="mi">11</span>
<span class="mi">1424</span>       <span class="n">cat</span>      <span class="mi">11</span>
<span class="mi">1425</span>       <span class="n">cat</span>      <span class="mi">11</span>
<span class="mi">1426</span>       <span class="n">cat</span>      <span class="mi">11</span>
<span class="mi">1427</span>       <span class="n">cat</span>      <span class="mi">11</span>
<span class="mi">1428</span>       <span class="n">cat</span>      <span class="mi">11</span>
<span class="mi">1429</span>       <span class="n">cat</span>      <span class="mi">11</span>
<span class="mi">1430</span>       <span class="n">cat</span>      <span class="mi">11</span>
<span class="mi">1431</span>       <span class="n">cat</span>      <span class="mi">11</span>
<span class="mi">1432</span>      <span class="n">rest</span>      <span class="mi">11</span>
<span class="mi">1433</span>      <span class="n">rest</span>      <span class="mi">11</span>
<span class="mi">1434</span>      <span class="n">rest</span>      <span class="mi">11</span>
<span class="mi">1435</span>      <span class="n">rest</span>      <span class="mi">11</span>
<span class="mi">1436</span>      <span class="n">rest</span>      <span class="mi">11</span>
<span class="mi">1437</span>  <span class="n">scissors</span>      <span class="mi">11</span>
<span class="mi">1438</span>  <span class="n">scissors</span>      <span class="mi">11</span>
<span class="mi">1439</span>  <span class="n">scissors</span>      <span class="mi">11</span>
<span class="mi">1440</span>  <span class="n">scissors</span>      <span class="mi">11</span>
<span class="mi">1441</span>  <span class="n">scissors</span>      <span class="mi">11</span>
<span class="mi">1442</span>  <span class="n">scissors</span>      <span class="mi">11</span>
<span class="mi">1443</span>  <span class="n">scissors</span>      <span class="mi">11</span>
<span class="mi">1444</span>  <span class="n">scissors</span>      <span class="mi">11</span>
<span class="mi">1445</span>  <span class="n">scissors</span>      <span class="mi">11</span>
<span class="mi">1446</span>      <span class="n">rest</span>      <span class="mi">11</span>
<span class="mi">1447</span>      <span class="n">rest</span>      <span class="mi">11</span>
<span class="mi">1448</span>      <span class="n">rest</span>      <span class="mi">11</span>
<span class="mi">1449</span>      <span class="n">rest</span>      <span class="mi">11</span>
<span class="mi">1450</span>      <span class="n">rest</span>      <span class="mi">11</span>
<span class="mi">1451</span>      <span class="n">rest</span>      <span class="mi">11</span>

<span class="p">[</span><span class="mi">1452</span> <span class="n">rows</span> <span class="n">x</span> <span class="mi">2</span> <span class="n">columns</span><span class="p">]</span>
</pre></div>
</div>
<p>Retrieve the experimental conditions, that we are going to use as
prediction targets in the decoding</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">conditions</span> <span class="o">=</span> <span class="n">behavioral</span><span class="p">[</span><span class="s1">&#39;labels&#39;</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">conditions</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">0</span>           <span class="n">rest</span>
<span class="mi">1</span>           <span class="n">rest</span>
<span class="mi">2</span>           <span class="n">rest</span>
<span class="mi">3</span>           <span class="n">rest</span>
<span class="mi">4</span>           <span class="n">rest</span>
<span class="mi">5</span>           <span class="n">rest</span>
<span class="mi">6</span>       <span class="n">scissors</span>
<span class="mi">7</span>       <span class="n">scissors</span>
<span class="mi">8</span>       <span class="n">scissors</span>
<span class="mi">9</span>       <span class="n">scissors</span>
<span class="mi">10</span>      <span class="n">scissors</span>
<span class="mi">11</span>      <span class="n">scissors</span>
<span class="mi">12</span>      <span class="n">scissors</span>
<span class="mi">13</span>      <span class="n">scissors</span>
<span class="mi">14</span>      <span class="n">scissors</span>
<span class="mi">15</span>          <span class="n">rest</span>
<span class="mi">16</span>          <span class="n">rest</span>
<span class="mi">17</span>          <span class="n">rest</span>
<span class="mi">18</span>          <span class="n">rest</span>
<span class="mi">19</span>          <span class="n">rest</span>
<span class="mi">20</span>          <span class="n">rest</span>
<span class="mi">21</span>          <span class="n">face</span>
<span class="mi">22</span>          <span class="n">face</span>
<span class="mi">23</span>          <span class="n">face</span>
<span class="mi">24</span>          <span class="n">face</span>
<span class="mi">25</span>          <span class="n">face</span>
<span class="mi">26</span>          <span class="n">face</span>
<span class="mi">27</span>          <span class="n">face</span>
<span class="mi">28</span>          <span class="n">face</span>
<span class="mi">29</span>          <span class="n">face</span>
          <span class="o">...</span>
<span class="mi">1422</span>        <span class="n">rest</span>
<span class="mi">1423</span>         <span class="n">cat</span>
<span class="mi">1424</span>         <span class="n">cat</span>
<span class="mi">1425</span>         <span class="n">cat</span>
<span class="mi">1426</span>         <span class="n">cat</span>
<span class="mi">1427</span>         <span class="n">cat</span>
<span class="mi">1428</span>         <span class="n">cat</span>
<span class="mi">1429</span>         <span class="n">cat</span>
<span class="mi">1430</span>         <span class="n">cat</span>
<span class="mi">1431</span>         <span class="n">cat</span>
<span class="mi">1432</span>        <span class="n">rest</span>
<span class="mi">1433</span>        <span class="n">rest</span>
<span class="mi">1434</span>        <span class="n">rest</span>
<span class="mi">1435</span>        <span class="n">rest</span>
<span class="mi">1436</span>        <span class="n">rest</span>
<span class="mi">1437</span>    <span class="n">scissors</span>
<span class="mi">1438</span>    <span class="n">scissors</span>
<span class="mi">1439</span>    <span class="n">scissors</span>
<span class="mi">1440</span>    <span class="n">scissors</span>
<span class="mi">1441</span>    <span class="n">scissors</span>
<span class="mi">1442</span>    <span class="n">scissors</span>
<span class="mi">1443</span>    <span class="n">scissors</span>
<span class="mi">1444</span>    <span class="n">scissors</span>
<span class="mi">1445</span>    <span class="n">scissors</span>
<span class="mi">1446</span>        <span class="n">rest</span>
<span class="mi">1447</span>        <span class="n">rest</span>
<span class="mi">1448</span>        <span class="n">rest</span>
<span class="mi">1449</span>        <span class="n">rest</span>
<span class="mi">1450</span>        <span class="n">rest</span>
<span class="mi">1451</span>        <span class="n">rest</span>
<span class="n">Name</span><span class="p">:</span> <span class="n">labels</span><span class="p">,</span> <span class="n">Length</span><span class="p">:</span> <span class="mi">1452</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="nb">object</span>
</pre></div>
</div>
</div>
<div class="section" id="restrict-the-analysis-to-cats-and-faces">
<h3>8.1.4.1.4. Restrict the analysis to cats and faces<a class="headerlink" href="#restrict-the-analysis-to-cats-and-faces" title="Permalink to this headline">¶</a></h3>
<p>As we can see from the targets above, the experiment contains many
conditions, not all that interest us for decoding.</p>
<p>To keep only data corresponding to faces or cats, we create a
mask of the samples belonging to the condition.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">condition_mask</span> <span class="o">=</span> <span class="n">conditions</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="s1">&#39;face&#39;</span><span class="p">,</span> <span class="s1">&#39;cat&#39;</span><span class="p">])</span>

<span class="c1"># We apply this mask in the sampe direction to restrict the</span>
<span class="c1"># classification to the face vs cat discrimination</span>
<span class="n">fmri_masked</span> <span class="o">=</span> <span class="n">fmri_masked</span><span class="p">[</span><span class="n">condition_mask</span><span class="p">]</span>
</pre></div>
</div>
<p>We now have less samples</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="n">fmri_masked</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="mi">216</span><span class="p">,</span> <span class="mi">464</span><span class="p">)</span>
</pre></div>
</div>
<p>We apply the same mask to the targets</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">conditions</span> <span class="o">=</span> <span class="n">conditions</span><span class="p">[</span><span class="n">condition_mask</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">conditions</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="mi">216</span><span class="p">,)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="decoding-with-an-svm">
<h2><a class="toc-backref" href="#id2">8.1.4.2. Decoding with an SVM</a><a class="headerlink" href="#decoding-with-an-svm" title="Permalink to this headline">¶</a></h2>
<p>We will now use the <a class="reference external" href="http://www.scikit-learn.org">scikit-learn</a>
machine-learning toolbox on the fmri_masked data.</p>
<p>As a decoder, we use a Support Vector Classification, with a linear
kernel.</p>
<p>We first create it:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.svm</span> <span class="kn">import</span> <a href="http://scikit-learn.org/0.17/modules/generated/sklearn.svm.SVC.html#sklearn.svm.SVC" title="View documentation for sklearn.svm.SVC"><span class="n">SVC</span></a>
<span class="n">svc</span> <span class="o">=</span> <a href="http://scikit-learn.org/0.17/modules/generated/sklearn.svm.SVC.html#sklearn.svm.SVC" title="View documentation for sklearn.svm.SVC"><span class="n">SVC</span></a><span class="p">(</span><span class="n">kernel</span><span class="o">=</span><span class="s1">&#39;linear&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">svc</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default notranslate"><div class="highlight"><pre><span></span><a href="http://scikit-learn.org/0.17/modules/generated/sklearn.svm.SVC.html#sklearn.svm.SVC" title="View documentation for sklearn.svm.SVC"><span class="n">SVC</span></a><span class="p">(</span><span class="n">C</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">cache_size</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">class_weight</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">coef0</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
  <span class="n">decision_function_shape</span><span class="o">=</span><span class="s1">&#39;ovr&#39;</span><span class="p">,</span> <span class="n">degree</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">gamma</span><span class="o">=</span><span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="n">kernel</span><span class="o">=</span><span class="s1">&#39;linear&#39;</span><span class="p">,</span>
  <span class="n">max_iter</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">probability</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">shrinking</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
  <span class="n">tol</span><span class="o">=</span><span class="mf">0.001</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>The svc object is an object that can be fit (or trained) on data with
labels, and then predict labels on data without.</p>
<p>We first fit it on the data</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">svc</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">fmri_masked</span><span class="p">,</span> <span class="n">conditions</span><span class="p">)</span>
</pre></div>
</div>
<p>We can then predict the labels from the data</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">prediction</span> <span class="o">=</span> <span class="n">svc</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">fmri_masked</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">prediction</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;cat&#39;</span>
 <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span>
 <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span>
 <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span>
 <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span>
 <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span>
 <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span>
 <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span>
 <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span>
 <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span>
 <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span>
 <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span>
 <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span>
 <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span>
 <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;face&#39;</span>
 <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span>
 <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span>
 <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span>
 <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span> <span class="s1">&#39;face&#39;</span>
 <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span> <span class="s1">&#39;cat&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Let’s measure the error rate:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">print</span><span class="p">((</span><span class="n">prediction</span> <span class="o">==</span> <span class="n">conditions</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">conditions</span><span class="p">)))</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">1.0</span>
</pre></div>
</div>
<p>This error rate is meaningless. Why?</p>
</div>
<div class="section" id="measuring-prediction-scores-using-cross-validation">
<h2><a class="toc-backref" href="#id3">8.1.4.3. Measuring prediction scores using cross-validation</a><a class="headerlink" href="#measuring-prediction-scores-using-cross-validation" title="Permalink to this headline">¶</a></h2>
<p>The proper way to measure error rates or prediction accuracy is via
cross-validation: leaving out some data and testing on it.</p>
<div class="section" id="manually-leaving-out-data">
<h3>8.1.4.3.1. Manually leaving out data<a class="headerlink" href="#manually-leaving-out-data" title="Permalink to this headline">¶</a></h3>
<p>Let’s leave out the 30 last data points during training, and test the
prediction on these 30 last points:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">svc</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">fmri_masked</span><span class="p">[:</span><span class="o">-</span><span class="mi">30</span><span class="p">],</span> <span class="n">conditions</span><span class="p">[:</span><span class="o">-</span><span class="mi">30</span><span class="p">])</span>

<span class="n">prediction</span> <span class="o">=</span> <span class="n">svc</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">fmri_masked</span><span class="p">[</span><span class="o">-</span><span class="mi">30</span><span class="p">:])</span>
<span class="k">print</span><span class="p">((</span><span class="n">prediction</span> <span class="o">==</span> <span class="n">conditions</span><span class="p">[</span><span class="o">-</span><span class="mi">30</span><span class="p">:])</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">conditions</span><span class="p">[</span><span class="o">-</span><span class="mi">30</span><span class="p">:])))</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">0.6666666666666666</span>
</pre></div>
</div>
</div>
<div class="section" id="implementing-a-kfold-loop">
<h3>8.1.4.3.2. Implementing a KFold loop<a class="headerlink" href="#implementing-a-kfold-loop" title="Permalink to this headline">¶</a></h3>
<p>We can split the data in train and test set repetitively in a <cite>KFold</cite>
strategy:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.cross_validation</span> <span class="kn">import</span> <a href="http://scikit-learn.org/0.17/modules/generated/sklearn.cross_validation.KFold.html#sklearn.cross_validation.KFold" title="View documentation for sklearn.cross_validation.KFold"><span class="n">KFold</span></a>

<span class="n">cv</span> <span class="o">=</span> <a href="http://scikit-learn.org/0.17/modules/generated/sklearn.cross_validation.KFold.html#sklearn.cross_validation.KFold" title="View documentation for sklearn.cross_validation.KFold"><span class="n">KFold</span></a><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">fmri_masked</span><span class="p">),</span> <span class="n">n_folds</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

<span class="k">for</span> <span class="n">train</span><span class="p">,</span> <span class="n">test</span> <span class="ow">in</span> <span class="n">cv</span><span class="p">:</span>
    <span class="n">conditions_masked</span> <span class="o">=</span> <span class="n">conditions</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="n">train</span><span class="p">]</span>
    <span class="n">svc</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">fmri_masked</span><span class="p">[</span><span class="n">train</span><span class="p">],</span> <span class="n">conditions_masked</span><span class="p">)</span>
    <span class="n">prediction</span> <span class="o">=</span> <span class="n">svc</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">fmri_masked</span><span class="p">[</span><span class="n">test</span><span class="p">])</span>
    <span class="k">print</span><span class="p">((</span><span class="n">prediction</span> <span class="o">==</span> <span class="n">conditions</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="n">test</span><span class="p">])</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
           <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">conditions</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="n">test</span><span class="p">])))</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">0.9772727272727273</span>
<span class="mf">0.7674418604651163</span>
<span class="mf">0.7906976744186046</span>
<span class="mf">0.5348837209302325</span>
<span class="mf">0.7441860465116279</span>
</pre></div>
</div>
</div>
<div class="section" id="cross-validation-with-scikit-learn">
<h3>8.1.4.3.3. Cross-validation with scikit-learn<a class="headerlink" href="#cross-validation-with-scikit-learn" title="Permalink to this headline">¶</a></h3>
<p>Scikit-learn has tools to perform cross-validation easier:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.cross_validation</span> <span class="kn">import</span> <a href="http://scikit-learn.org/0.17/modules/generated/sklearn.cross_validation.cross_val_score.html#sklearn.cross_validation.cross_val_score" title="View documentation for sklearn.cross_validation.cross_val_score"><span class="n">cross_val_score</span></a>
<span class="n">cv_score</span> <span class="o">=</span> <a href="http://scikit-learn.org/0.17/modules/generated/sklearn.cross_validation.cross_val_score.html#sklearn.cross_validation.cross_val_score" title="View documentation for sklearn.cross_validation.cross_val_score"><span class="n">cross_val_score</span></a><span class="p">(</span><span class="n">svc</span><span class="p">,</span> <span class="n">fmri_masked</span><span class="p">,</span> <span class="n">conditions</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">cv_score</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mf">0.59722222</span> <span class="mf">0.80555556</span> <span class="mf">0.55555556</span><span class="p">]</span>
</pre></div>
</div>
<p>Note that we can speed things up to use all the CPUs of our computer
with the n_jobs parameter.</p>
<p>By default, cross_val_score uses a 3-fold KFold. We can control this by
passing the “cv” object, here a 5-fold:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cv_score</span> <span class="o">=</span> <a href="http://scikit-learn.org/0.17/modules/generated/sklearn.cross_validation.cross_val_score.html#sklearn.cross_validation.cross_val_score" title="View documentation for sklearn.cross_validation.cross_val_score"><span class="n">cross_val_score</span></a><span class="p">(</span><span class="n">svc</span><span class="p">,</span> <span class="n">fmri_masked</span><span class="p">,</span> <span class="n">conditions</span><span class="p">,</span> <span class="n">cv</span><span class="o">=</span><span class="n">cv</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">cv_score</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mf">0.97727273</span> <span class="mf">0.76744186</span> <span class="mf">0.79069767</span> <span class="mf">0.53488372</span> <span class="mf">0.74418605</span><span class="p">]</span>
</pre></div>
</div>
<p>The best way to do cross-validation is to respect the structure of
the experiment, for instance by leaving out full sessions of
acquisition.</p>
<p>The number of the session is stored in the CSV file giving the
behavioral data. We have to apply our session mask, to select only cats
and faces. To leave a session out, we pass it to a
LeaveOneLabelOut object:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">session_label</span> <span class="o">=</span> <span class="n">behavioral</span><span class="p">[</span><span class="s1">&#39;chunks&#39;</span><span class="p">][</span><span class="n">condition_mask</span><span class="p">]</span>

<span class="kn">from</span> <span class="nn">sklearn.cross_validation</span> <span class="kn">import</span> <a href="http://scikit-learn.org/0.17/modules/generated/sklearn.cross_validation.LeaveOneLabelOut.html#sklearn.cross_validation.LeaveOneLabelOut" title="View documentation for sklearn.cross_validation.LeaveOneLabelOut"><span class="n">LeaveOneLabelOut</span></a>
<span class="n">cv</span> <span class="o">=</span> <a href="http://scikit-learn.org/0.17/modules/generated/sklearn.cross_validation.LeaveOneLabelOut.html#sklearn.cross_validation.LeaveOneLabelOut" title="View documentation for sklearn.cross_validation.LeaveOneLabelOut"><span class="n">LeaveOneLabelOut</span></a><span class="p">(</span><span class="n">session_label</span><span class="p">)</span>
<span class="n">cv_score</span> <span class="o">=</span> <a href="http://scikit-learn.org/0.17/modules/generated/sklearn.cross_validation.cross_val_score.html#sklearn.cross_validation.cross_val_score" title="View documentation for sklearn.cross_validation.cross_val_score"><span class="n">cross_val_score</span></a><span class="p">(</span><span class="n">svc</span><span class="p">,</span> <span class="n">fmri_masked</span><span class="p">,</span> <span class="n">conditions</span><span class="p">,</span> <span class="n">cv</span><span class="o">=</span><span class="n">cv</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">cv_score</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mf">0.55555556</span> <span class="mf">1.</span>         <span class="mf">0.66666667</span> <span class="mf">0.66666667</span> <span class="mf">0.77777778</span> <span class="mf">0.72222222</span>
 <span class="mf">0.88888889</span> <span class="mf">0.38888889</span> <span class="mf">0.66666667</span> <span class="mf">0.5</span>        <span class="mf">0.77777778</span> <span class="mf">0.66666667</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="inspecting-the-model-weights">
<h2><a class="toc-backref" href="#id4">8.1.4.4. Inspecting the model weights</a><a class="headerlink" href="#inspecting-the-model-weights" title="Permalink to this headline">¶</a></h2>
<p>Finally, it may be useful to inspect and display the model weights.</p>
<div class="section" id="turning-the-weights-into-a-nifti-image">
<h3>8.1.4.4.1. Turning the weights into a nifti image<a class="headerlink" href="#turning-the-weights-into-a-nifti-image" title="Permalink to this headline">¶</a></h3>
<p>We retrieve the SVC discriminating weights</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">coef_</span> <span class="o">=</span> <span class="n">svc</span><span class="o">.</span><span class="n">coef_</span>
<span class="k">print</span><span class="p">(</span><span class="n">coef_</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="o">-</span><span class="mf">4.10591439e-02</span> <span class="o">-</span><span class="mf">8.38913669e-04</span> <span class="o">-</span><span class="mf">2.34992127e-02</span> <span class="o">-</span><span class="mf">3.47431514e-02</span>
   <span class="mf">3.44100694e-02</span>  <span class="mf">2.59043472e-02</span>  <span class="mf">2.39052353e-02</span> <span class="o">-</span><span class="mf">4.95012599e-02</span>
  <span class="o">-</span><span class="mf">3.19443415e-02</span> <span class="o">-</span><span class="mf">1.65893786e-02</span>  <span class="mf">1.87552899e-02</span> <span class="o">-</span><span class="mf">7.78939157e-03</span>
   <span class="mf">1.02022966e-02</span> <span class="o">-</span><span class="mf">3.23066175e-02</span>  <span class="mf">4.77513388e-03</span>  <span class="mf">2.20187375e-02</span>
   <span class="mf">1.50985089e-02</span>  <span class="mf">1.77166050e-03</span>  <span class="mf">2.41532650e-02</span> <span class="o">-</span><span class="mf">3.24624084e-02</span>
   <span class="mf">1.30955876e-02</span> <span class="o">-</span><span class="mf">9.66231411e-02</span> <span class="o">-</span><span class="mf">7.07582442e-02</span>  <span class="mf">1.92832959e-02</span>
   <span class="mf">3.57739471e-02</span> <span class="o">-</span><span class="mf">1.44028906e-02</span> <span class="o">-</span><span class="mf">9.17654420e-03</span> <span class="o">-</span><span class="mf">3.23610315e-02</span>
   <span class="mf">2.34853293e-02</span>  <span class="mf">1.01923043e-01</span>  <span class="mf">1.61348815e-02</span> <span class="o">-</span><span class="mf">7.79778695e-02</span>
   <span class="mf">2.49681620e-03</span> <span class="o">-</span><span class="mf">3.13738572e-02</span> <span class="o">-</span><span class="mf">2.80103975e-02</span> <span class="o">-</span><span class="mf">5.16189181e-02</span>
  <span class="o">-</span><span class="mf">6.94717904e-03</span> <span class="o">-</span><span class="mf">1.00566568e-02</span> <span class="o">-</span><span class="mf">2.96087048e-02</span> <span class="o">-</span><span class="mf">2.25467990e-02</span>
  <span class="o">-</span><span class="mf">3.00431368e-02</span> <span class="o">-</span><span class="mf">3.28028599e-02</span>  <span class="mf">2.65750951e-02</span>  <span class="mf">1.66043690e-02</span>
  <span class="o">-</span><span class="mf">1.63196266e-02</span>  <span class="mf">3.33049535e-02</span>  <span class="mf">4.58224672e-04</span>  <span class="mf">7.30845484e-03</span>
   <span class="mf">2.85276988e-02</span>  <span class="mf">1.98812475e-02</span>  <span class="mf">2.65800328e-02</span>  <span class="mf">1.87685655e-02</span>
  <span class="o">-</span><span class="mf">2.05262911e-02</span> <span class="o">-</span><span class="mf">9.08269461e-03</span> <span class="o">-</span><span class="mf">4.53160560e-02</span>  <span class="mf">1.59140903e-02</span>
  <span class="o">-</span><span class="mf">1.75433965e-02</span> <span class="o">-</span><span class="mf">6.90762579e-02</span>  <span class="mf">3.89501904e-02</span> <span class="o">-</span><span class="mf">1.28822089e-01</span>
  <span class="o">-</span><span class="mf">3.50391659e-02</span>  <span class="mf">6.48267437e-03</span>  <span class="mf">5.01267951e-02</span> <span class="o">-</span><span class="mf">7.63127896e-02</span>
  <span class="o">-</span><span class="mf">1.70264978e-02</span>  <span class="mf">5.40262082e-03</span>  <span class="mf">5.61464364e-02</span> <span class="o">-</span><span class="mf">1.73917761e-02</span>
   <span class="mf">7.37187399e-02</span>  <span class="mf">1.29712224e-02</span>  <span class="mf">3.31590258e-02</span>  <span class="mf">6.15625548e-03</span>
   <span class="mf">4.10859945e-02</span> <span class="o">-</span><span class="mf">6.77459982e-03</span>  <span class="mf">7.23131333e-03</span>  <span class="mf">2.18362878e-02</span>
   <span class="mf">3.84148397e-02</span>  <span class="mf">2.63664841e-02</span>  <span class="mf">1.74112933e-02</span>  <span class="mf">1.61460386e-02</span>
   <span class="mf">2.82263367e-02</span> <span class="o">-</span><span class="mf">5.51453962e-03</span> <span class="o">-</span><span class="mf">1.24329869e-02</span> <span class="o">-</span><span class="mf">1.65007919e-02</span>
   <span class="mf">1.53495049e-03</span> <span class="o">-</span><span class="mf">3.58689292e-02</span> <span class="o">-</span><span class="mf">2.45351639e-02</span> <span class="o">-</span><span class="mf">4.79747313e-03</span>
  <span class="o">-</span><span class="mf">5.32036709e-02</span>  <span class="mf">3.68274125e-02</span> <span class="o">-</span><span class="mf">1.69981985e-02</span>  <span class="mf">1.08511387e-02</span>
  <span class="o">-</span><span class="mf">4.80508461e-02</span> <span class="o">-</span><span class="mf">3.69829093e-02</span> <span class="o">-</span><span class="mf">4.36149708e-02</span> <span class="o">-</span><span class="mf">2.27505354e-02</span>
  <span class="o">-</span><span class="mf">1.82647161e-02</span> <span class="o">-</span><span class="mf">1.29988416e-02</span>  <span class="mf">3.45534849e-02</span>  <span class="mf">7.32459494e-03</span>
  <span class="o">-</span><span class="mf">5.96338242e-03</span>  <span class="mf">5.11828907e-02</span>  <span class="mf">1.78048855e-02</span> <span class="o">-</span><span class="mf">4.10786820e-02</span>
   <span class="mf">3.44218340e-02</span>  <span class="mf">1.02061855e-02</span>  <span class="mf">3.24182697e-02</span>  <span class="mf">3.40190648e-02</span>
  <span class="o">-</span><span class="mf">9.72497936e-03</span>  <span class="mf">2.21466123e-02</span>  <span class="mf">1.51944122e-02</span> <span class="o">-</span><span class="mf">5.13909282e-02</span>
  <span class="o">-</span><span class="mf">2.25212663e-02</span> <span class="o">-</span><span class="mf">5.36059085e-02</span>  <span class="mf">1.74461316e-02</span> <span class="o">-</span><span class="mf">1.73912821e-02</span>
  <span class="o">-</span><span class="mf">5.30948812e-02</span>  <span class="mf">4.28375575e-02</span> <span class="o">-</span><span class="mf">1.75974389e-02</span>  <span class="mf">2.65186313e-03</span>
  <span class="o">-</span><span class="mf">2.93060690e-02</span> <span class="o">-</span><span class="mf">2.90011563e-02</span>  <span class="mf">1.88280315e-02</span> <span class="o">-</span><span class="mf">3.77559429e-02</span>
   <span class="mf">2.82039100e-03</span>  <span class="mf">4.76274597e-02</span>  <span class="mf">3.82002135e-02</span>  <span class="mf">7.30823353e-03</span>
  <span class="o">-</span><span class="mf">5.78025756e-02</span>  <span class="mf">4.88796086e-03</span>  <span class="mf">2.08386543e-02</span>  <span class="mf">3.10799309e-06</span>
   <span class="mf">7.64731722e-05</span> <span class="o">-</span><span class="mf">5.30726179e-03</span>  <span class="mf">8.32036061e-04</span>  <span class="mf">6.96334682e-03</span>
  <span class="o">-</span><span class="mf">2.52437504e-02</span> <span class="o">-</span><span class="mf">1.01739725e-02</span> <span class="o">-</span><span class="mf">1.62671356e-02</span>  <span class="mf">3.42707627e-02</span>
   <span class="mf">1.00432285e-02</span> <span class="o">-</span><span class="mf">2.50394237e-02</span> <span class="o">-</span><span class="mf">6.19833205e-03</span> <span class="o">-</span><span class="mf">2.77334894e-02</span>
  <span class="o">-</span><span class="mf">1.03254429e-02</span> <span class="o">-</span><span class="mf">1.42163226e-02</span>  <span class="mf">3.39557786e-03</span>  <span class="mf">5.27978096e-02</span>
  <span class="o">-</span><span class="mf">2.05438140e-02</span> <span class="o">-</span><span class="mf">5.70770065e-02</span>  <span class="mf">1.02214240e-02</span> <span class="o">-</span><span class="mf">5.51708996e-02</span>
  <span class="o">-</span><span class="mf">1.29624200e-02</span>  <span class="mf">3.77777072e-03</span>  <span class="mf">7.88352021e-03</span>  <span class="mf">1.51368300e-02</span>
   <span class="mf">5.94512230e-02</span>  <span class="mf">3.75684469e-02</span>  <span class="mf">4.61933687e-02</span> <span class="o">-</span><span class="mf">6.28617029e-03</span>
  <span class="o">-</span><span class="mf">2.31685868e-03</span>  <span class="mf">4.39664384e-02</span>  <span class="mf">6.82138779e-02</span>  <span class="mf">1.58698406e-02</span>
   <span class="mf">5.48997068e-02</span>  <span class="mf">8.31410463e-02</span> <span class="o">-</span><span class="mf">8.97988526e-03</span>  <span class="mf">7.83481005e-03</span>
   <span class="mf">2.26074506e-02</span> <span class="o">-</span><span class="mf">2.60458600e-02</span>  <span class="mf">4.45277489e-02</span> <span class="o">-</span><span class="mf">2.86097190e-02</span>
  <span class="o">-</span><span class="mf">4.99059962e-02</span>  <span class="mf">1.71997729e-03</span>  <span class="mf">3.65673224e-02</span>  <span class="mf">8.15741229e-04</span>
   <span class="mf">1.83704939e-02</span>  <span class="mf">5.17197092e-02</span>  <span class="mf">6.35578528e-03</span>  <span class="mf">7.05183282e-04</span>
   <span class="mf">1.64023420e-02</span>  <span class="mf">4.50576924e-03</span>  <span class="mf">3.11797770e-02</span> <span class="o">-</span><span class="mf">3.37322280e-03</span>
  <span class="o">-</span><span class="mf">1.27150811e-02</span> <span class="o">-</span><span class="mf">2.60359954e-02</span>  <span class="mf">1.47512619e-02</span>  <span class="mf">6.84497712e-02</span>
   <span class="mf">1.07656559e-02</span>  <span class="mf">1.99667580e-02</span>  <span class="mf">7.49694140e-03</span> <span class="o">-</span><span class="mf">3.16838856e-02</span>
   <span class="mf">3.10212576e-02</span> <span class="o">-</span><span class="mf">1.52473819e-04</span> <span class="o">-</span><span class="mf">3.06834455e-02</span> <span class="o">-</span><span class="mf">1.12419283e-02</span>
  <span class="o">-</span><span class="mf">2.01262203e-02</span>  <span class="mf">1.44459697e-02</span>  <span class="mf">1.89684619e-02</span>  <span class="mf">1.71060489e-02</span>
  <span class="o">-</span><span class="mf">6.42078682e-02</span>  <span class="mf">2.56285714e-03</span> <span class="o">-</span><span class="mf">6.97908819e-02</span>  <span class="mf">4.37415790e-02</span>
  <span class="o">-</span><span class="mf">2.19265925e-02</span>  <span class="mf">2.75412496e-02</span>  <span class="mf">2.26371659e-02</span>  <span class="mf">6.08747457e-03</span>
   <span class="mf">7.00948041e-02</span> <span class="o">-</span><span class="mf">5.47876565e-02</span>  <span class="mf">5.00929706e-03</span> <span class="o">-</span><span class="mf">1.32239805e-02</span>
  <span class="o">-</span><span class="mf">1.67932274e-02</span> <span class="o">-</span><span class="mf">2.90672109e-02</span> <span class="o">-</span><span class="mf">4.34679793e-02</span> <span class="o">-</span><span class="mf">2.32697607e-02</span>
  <span class="o">-</span><span class="mf">1.14648197e-01</span>  <span class="mf">1.08002999e-03</span> <span class="o">-</span><span class="mf">1.34715639e-02</span> <span class="o">-</span><span class="mf">2.42857355e-02</span>
   <span class="mf">4.32411447e-03</span> <span class="o">-</span><span class="mf">7.01753153e-03</span> <span class="o">-</span><span class="mf">5.78315906e-02</span> <span class="o">-</span><span class="mf">1.63359362e-02</span>
  <span class="o">-</span><span class="mf">7.83189241e-02</span> <span class="o">-</span><span class="mf">6.56549588e-02</span>  <span class="mf">1.59472704e-02</span> <span class="o">-</span><span class="mf">3.93885430e-02</span>
   <span class="mf">3.70071579e-02</span> <span class="o">-</span><span class="mf">8.53304624e-02</span> <span class="o">-</span><span class="mf">1.46804768e-02</span> <span class="o">-</span><span class="mf">3.66368426e-02</span>
   <span class="mf">6.33237317e-04</span>  <span class="mf">3.15900362e-02</span> <span class="o">-</span><span class="mf">3.74878316e-02</span> <span class="o">-</span><span class="mf">2.36906438e-02</span>
  <span class="o">-</span><span class="mf">3.48493077e-02</span> <span class="o">-</span><span class="mf">1.29455374e-02</span>  <span class="mf">3.04677148e-02</span> <span class="o">-</span><span class="mf">5.92433891e-03</span>
  <span class="o">-</span><span class="mf">2.96713551e-02</span> <span class="o">-</span><span class="mf">1.06306524e-02</span> <span class="o">-</span><span class="mf">4.51622456e-02</span> <span class="o">-</span><span class="mf">1.39410348e-02</span>
  <span class="o">-</span><span class="mf">3.72100330e-02</span>  <span class="mf">7.48408861e-03</span> <span class="o">-</span><span class="mf">5.96724188e-02</span>  <span class="mf">6.34547444e-02</span>
   <span class="mf">3.87715096e-02</span>  <span class="mf">3.48643739e-03</span> <span class="o">-</span><span class="mf">3.29345516e-02</span> <span class="o">-</span><span class="mf">2.05291736e-02</span>
   <span class="mf">3.74104677e-02</span> <span class="o">-</span><span class="mf">5.28466371e-02</span> <span class="o">-</span><span class="mf">5.24368180e-02</span> <span class="o">-</span><span class="mf">1.08615834e-01</span>
  <span class="o">-</span><span class="mf">3.93677233e-02</span>  <span class="mf">2.73577934e-02</span> <span class="o">-</span><span class="mf">1.15112257e-02</span> <span class="o">-</span><span class="mf">3.11615139e-02</span>
   <span class="mf">2.96191093e-02</span> <span class="o">-</span><span class="mf">1.56250888e-02</span>  <span class="mf">8.23424923e-03</span> <span class="o">-</span><span class="mf">2.21058103e-02</span>
   <span class="mf">1.46964377e-02</span>  <span class="mf">2.33201228e-02</span>  <span class="mf">2.13609673e-02</span> <span class="o">-</span><span class="mf">8.54915916e-04</span>
   <span class="mf">9.25025018e-02</span>  <span class="mf">8.45063327e-03</span>  <span class="mf">4.39500980e-02</span> <span class="o">-</span><span class="mf">7.08333209e-02</span>
  <span class="o">-</span><span class="mf">2.79867591e-02</span>  <span class="mf">1.02058740e-02</span> <span class="o">-</span><span class="mf">6.08684855e-02</span>  <span class="mf">6.20570031e-03</span>
   <span class="mf">3.75086657e-02</span>  <span class="mf">9.68286171e-02</span>  <span class="mf">4.41023193e-02</span>  <span class="mf">4.73388356e-02</span>
   <span class="mf">3.91426944e-02</span> <span class="o">-</span><span class="mf">1.99352505e-02</span>  <span class="mf">7.03359502e-03</span> <span class="o">-</span><span class="mf">2.44020595e-02</span>
  <span class="o">-</span><span class="mf">2.99892130e-02</span> <span class="o">-</span><span class="mf">3.25777097e-02</span>  <span class="mf">2.72322372e-03</span>  <span class="mf">7.77638452e-03</span>
   <span class="mf">5.01101070e-02</span>  <span class="mf">9.72297020e-03</span>  <span class="mf">8.82609430e-03</span>  <span class="mf">1.97665762e-02</span>
   <span class="mf">1.24510717e-03</span> <span class="o">-</span><span class="mf">2.57096538e-03</span>  <span class="mf">3.11640278e-03</span>  <span class="mf">2.92457840e-02</span>
   <span class="mf">6.42228310e-03</span> <span class="o">-</span><span class="mf">9.54802550e-03</span> <span class="o">-</span><span class="mf">4.14943422e-02</span> <span class="o">-</span><span class="mf">2.03235930e-02</span>
  <span class="o">-</span><span class="mf">4.09358168e-02</span>  <span class="mf">6.34522456e-03</span>  <span class="mf">3.81027536e-02</span> <span class="o">-</span><span class="mf">1.24257807e-03</span>
  <span class="o">-</span><span class="mf">1.35866182e-02</span>  <span class="mf">3.19962258e-03</span>  <span class="mf">4.15927262e-03</span>  <span class="mf">2.61804263e-02</span>
   <span class="mf">6.27312985e-02</span> <span class="o">-</span><span class="mf">9.58309235e-03</span> <span class="o">-</span><span class="mf">3.81101069e-02</span> <span class="o">-</span><span class="mf">8.98117138e-03</span>
  <span class="o">-</span><span class="mf">4.78051891e-03</span> <span class="o">-</span><span class="mf">5.94786274e-02</span>  <span class="mf">3.94663899e-02</span>  <span class="mf">6.07790784e-02</span>
  <span class="o">-</span><span class="mf">8.31262780e-03</span> <span class="o">-</span><span class="mf">6.94258109e-03</span>  <span class="mf">4.99962896e-02</span>  <span class="mf">2.73733671e-02</span>
  <span class="o">-</span><span class="mf">5.71262633e-03</span> <span class="o">-</span><span class="mf">1.84389576e-03</span>  <span class="mf">1.76737707e-01</span>  <span class="mf">1.14519296e-02</span>
  <span class="o">-</span><span class="mf">3.12318244e-02</span>  <span class="mf">3.35009779e-02</span>  <span class="mf">5.39812542e-03</span> <span class="o">-</span><span class="mf">1.24046393e-02</span>
  <span class="o">-</span><span class="mf">3.01223574e-02</span> <span class="o">-</span><span class="mf">2.34884768e-02</span> <span class="o">-</span><span class="mf">4.04753625e-02</span> <span class="o">-</span><span class="mf">3.31808379e-02</span>
  <span class="o">-</span><span class="mf">3.44700460e-02</span>  <span class="mf">4.34950149e-03</span> <span class="o">-</span><span class="mf">1.12128351e-02</span>  <span class="mf">2.66120489e-02</span>
  <span class="o">-</span><span class="mf">2.08353307e-02</span> <span class="o">-</span><span class="mf">5.55524566e-02</span>  <span class="mf">9.02084978e-02</span> <span class="o">-</span><span class="mf">5.42311876e-03</span>
   <span class="mf">4.40591115e-02</span> <span class="o">-</span><span class="mf">3.83539141e-02</span> <span class="o">-</span><span class="mf">1.54222839e-03</span> <span class="o">-</span><span class="mf">2.17430721e-02</span>
   <span class="mf">2.45192255e-02</span> <span class="o">-</span><span class="mf">1.80792703e-02</span>  <span class="mf">4.16507360e-02</span>  <span class="mf">3.39222577e-03</span>
   <span class="mf">1.35898003e-02</span>  <span class="mf">5.62169808e-02</span>  <span class="mf">2.05511201e-02</span>  <span class="mf">5.22713085e-02</span>
   <span class="mf">5.72247210e-02</span> <span class="o">-</span><span class="mf">8.37975269e-03</span>  <span class="mf">4.06737553e-02</span>  <span class="mf">5.04869536e-03</span>
   <span class="mf">8.32129801e-02</span> <span class="o">-</span><span class="mf">3.55796178e-02</span>  <span class="mf">5.42543214e-03</span>  <span class="mf">3.00522892e-02</span>
  <span class="o">-</span><span class="mf">2.63670321e-02</span> <span class="o">-</span><span class="mf">2.92756811e-02</span> <span class="o">-</span><span class="mf">8.30947903e-02</span> <span class="o">-</span><span class="mf">1.35585937e-02</span>
  <span class="o">-</span><span class="mf">2.90020763e-02</span>  <span class="mf">1.64358003e-02</span> <span class="o">-</span><span class="mf">2.01398046e-02</span> <span class="o">-</span><span class="mf">1.03980476e-02</span>
  <span class="o">-</span><span class="mf">2.06189132e-03</span>  <span class="mf">7.90399394e-02</span> <span class="o">-</span><span class="mf">3.72163735e-02</span> <span class="o">-</span><span class="mf">1.83636584e-02</span>
  <span class="o">-</span><span class="mf">2.12257025e-02</span>  <span class="mf">2.37873219e-02</span>  <span class="mf">7.58760375e-02</span>  <span class="mf">3.17983915e-02</span>
   <span class="mf">2.44485483e-02</span> <span class="o">-</span><span class="mf">2.00030934e-03</span> <span class="o">-</span><span class="mf">6.50080563e-03</span> <span class="o">-</span><span class="mf">3.43038946e-03</span>
  <span class="o">-</span><span class="mf">9.17293632e-03</span>  <span class="mf">2.16091063e-02</span> <span class="o">-</span><span class="mf">1.86680470e-03</span> <span class="o">-</span><span class="mf">8.67444519e-02</span>
  <span class="o">-</span><span class="mf">3.76717846e-02</span>  <span class="mf">1.93650951e-02</span>  <span class="mf">3.42706125e-02</span> <span class="o">-</span><span class="mf">1.84720711e-02</span>
  <span class="o">-</span><span class="mf">5.55555972e-02</span> <span class="o">-</span><span class="mf">2.37116507e-02</span>  <span class="mf">5.81776873e-02</span> <span class="o">-</span><span class="mf">8.53892872e-03</span>
  <span class="o">-</span><span class="mf">2.07530777e-02</span> <span class="o">-</span><span class="mf">8.53067546e-04</span>  <span class="mf">2.72667521e-02</span> <span class="o">-</span><span class="mf">3.51271213e-03</span>
   <span class="mf">2.06427064e-02</span> <span class="o">-</span><span class="mf">8.93358005e-03</span> <span class="o">-</span><span class="mf">6.59351511e-04</span> <span class="o">-</span><span class="mf">1.36124161e-02</span>
   <span class="mf">3.95871060e-02</span>  <span class="mf">2.60889355e-02</span> <span class="o">-</span><span class="mf">4.33492580e-03</span> <span class="o">-</span><span class="mf">1.18201950e-02</span>
  <span class="o">-</span><span class="mf">1.91292290e-02</span> <span class="o">-</span><span class="mf">2.46696785e-02</span>  <span class="mf">2.43858751e-02</span>  <span class="mf">5.70631381e-03</span>
  <span class="o">-</span><span class="mf">2.25983571e-02</span>  <span class="mf">3.35543974e-02</span>  <span class="mf">2.40025148e-03</span>  <span class="mf">9.97905075e-03</span>
   <span class="mf">2.38300137e-02</span>  <span class="mf">4.01035787e-02</span>  <span class="mf">4.73236294e-02</span> <span class="o">-</span><span class="mf">3.05304529e-02</span>
  <span class="o">-</span><span class="mf">3.46325886e-02</span>  <span class="mf">8.39215710e-04</span> <span class="o">-</span><span class="mf">4.89761870e-02</span>  <span class="mf">6.89462038e-03</span>
  <span class="o">-</span><span class="mf">6.43273366e-02</span> <span class="o">-</span><span class="mf">6.98259848e-02</span>  <span class="mf">5.46324448e-02</span> <span class="o">-</span><span class="mf">3.85178692e-02</span>
  <span class="o">-</span><span class="mf">1.88327596e-02</span>  <span class="mf">2.04875750e-02</span>  <span class="mf">2.30507846e-02</span>  <span class="mf">2.90462605e-02</span>
  <span class="o">-</span><span class="mf">5.97637507e-03</span>  <span class="mf">4.81619008e-02</span>  <span class="mf">2.38865302e-02</span>  <span class="mf">3.72272632e-03</span>
   <span class="mf">4.98869102e-02</span> <span class="o">-</span><span class="mf">4.44756682e-02</span>  <span class="mf">7.97887018e-03</span> <span class="o">-</span><span class="mf">2.10699182e-02</span>
   <span class="mf">5.06694017e-02</span> <span class="o">-</span><span class="mf">7.28995658e-02</span> <span class="o">-</span><span class="mf">2.29531446e-02</span>  <span class="mf">2.04757321e-02</span>
  <span class="o">-</span><span class="mf">4.30773655e-02</span> <span class="o">-</span><span class="mf">4.20149354e-02</span>  <span class="mf">1.34561591e-02</span>  <span class="mf">2.11104965e-02</span>
   <span class="mf">1.25247353e-02</span> <span class="o">-</span><span class="mf">3.91501850e-02</span> <span class="o">-</span><span class="mf">2.81964084e-02</span>  <span class="mf">5.69533437e-03</span>
  <span class="o">-</span><span class="mf">5.09280045e-02</span>  <span class="mf">3.13800843e-02</span> <span class="o">-</span><span class="mf">6.28572542e-03</span> <span class="o">-</span><span class="mf">5.08252999e-02</span>
   <span class="mf">1.54894409e-02</span>  <span class="mf">2.86118800e-02</span>  <span class="mf">4.85921862e-02</span> <span class="o">-</span><span class="mf">3.17075185e-03</span>
   <span class="mf">2.22448348e-02</span>  <span class="mf">1.68500752e-02</span>  <span class="mf">2.89099486e-02</span> <span class="o">-</span><span class="mf">2.41337610e-02</span>
  <span class="o">-</span><span class="mf">1.78519517e-02</span>  <span class="mf">6.16670437e-03</span> <span class="o">-</span><span class="mf">3.18354357e-02</span>  <span class="mf">1.94965342e-02</span><span class="p">]]</span>
</pre></div>
</div>
<p>It’s a numpy array</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="n">coef_</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">464</span><span class="p">)</span>
</pre></div>
</div>
<p>We need to turn it back into a Nifti image, in essence, “inverting”
what the NiftiMasker has done.</p>
<p>For this, we can call inverse_transform on the NiftiMasker:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">coef_img</span> <span class="o">=</span> <span class="n">masker</span><span class="o">.</span><span class="n">inverse_transform</span><span class="p">(</span><span class="n">coef_</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">coef_img</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;nibabel.nifti1.Nifti1Image&#39;&gt;
data shape (40, 64, 64, 1)
affine:
[[  -3.5      0.       0.      68.25 ]
 [   0.       3.75     0.    -118.125]
 [   0.       0.       3.75  -118.125]
 [   0.       0.       0.       1.   ]]
metadata:
&lt;class &#39;nibabel.nifti1.Nifti1Header&#39;&gt; object, endian=&#39;&lt;&#39;
sizeof_hdr      : 348
data_type       :
db_name         :
extents         : 0
session_error   : 0
regular         :
dim_info        : 0
dim             : [ 4 40 64 64  1  1  1  1]
intent_p1       : 0.0
intent_p2       : 0.0
intent_p3       : 0.0
intent_code     : none
datatype        : float64
bitpix          : 64
slice_start     : 0
pixdim          : [-1.    3.5   3.75  3.75  1.    1.    1.    1.  ]
vox_offset      : 0.0
scl_slope       : nan
scl_inter       : nan
slice_end       : 0
slice_code      : unknown
xyzt_units      : 0
cal_max         : 0.0
cal_min         : 0.0
slice_duration  : 0.0
toffset         : 0.0
glmax           : 0
glmin           : 0
descrip         :
aux_file        :
qform_code      : unknown
sform_code      : aligned
quatern_b       : 0.0
quatern_c       : 1.0
quatern_d       : 0.0
qoffset_x       : 68.25
qoffset_y       : -118.125
qoffset_z       : -118.125
srow_x          : [-3.5   0.    0.   68.25]
srow_y          : [   0.       3.75     0.    -118.125]
srow_z          : [   0.       0.       3.75  -118.125]
intent_name     :
magic           : n+1
</pre></div>
</div>
<p>coef_img is now a NiftiImage.</p>
<p>We can save the coefficients as a nii.gz file:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">coef_img</span><span class="o">.</span><span class="n">to_filename</span><span class="p">(</span><span class="s1">&#39;haxby_svc_weights.nii.gz&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="plotting-the-svm-weights">
<h3>8.1.4.4.2. Plotting the SVM weights<a class="headerlink" href="#plotting-the-svm-weights" title="Permalink to this headline">¶</a></h3>
<p>We can plot the weights, using the subject’s anatomical as a background</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">nilearn.plotting</span> <span class="kn">import</span> <a href="../modules/generated/nilearn.plotting.plot_stat_map.html#nilearn.plotting.plot_stat_map" title="View documentation for nilearn.plotting.plot_stat_map"><span class="n">plot_stat_map</span></a><span class="p">,</span> <a href="../modules/generated/nilearn.plotting.show.html#nilearn.plotting.show" title="View documentation for nilearn.plotting.show"><span class="n">show</span></a>

<a href="../modules/generated/nilearn.plotting.plot_stat_map.html#nilearn.plotting.plot_stat_map" title="View documentation for nilearn.plotting.plot_stat_map"><span class="n">plot_stat_map</span></a><span class="p">(</span><span class="n">coef_img</span><span class="p">,</span> <span class="n">bg_img</span><span class="o">=</span><span class="n">haxby_dataset</span><span class="o">.</span><span class="n">anat</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
              <span class="n">title</span><span class="o">=</span><span class="s2">&quot;SVM weights&quot;</span><span class="p">,</span> <span class="n">display_mode</span><span class="o">=</span><span class="s2">&quot;yx&quot;</span><span class="p">)</span>

<a href="../modules/generated/nilearn.plotting.show.html#nilearn.plotting.show" title="View documentation for nilearn.plotting.show"><span class="n">show</span></a><span class="p">()</span>
</pre></div>
</div>
<img alt="../_images/sphx_glr_plot_decoding_tutorial_002.png" class="align-center" src="../_images/sphx_glr_plot_decoding_tutorial_002.png" />
</div>
</div>
<div class="section" id="further-reading">
<h2><a class="toc-backref" href="#id5">8.1.4.5. Further reading</a><a class="headerlink" href="#further-reading" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>The <a class="reference internal" href="../decoding/index.html#decoding"><span class="std std-ref">section of the documentation on decoding</span></a></li>
<li><a class="reference internal" href="02_decoding/plot_haxby_anova_svm.html#sphx-glr-auto-examples-02-decoding-plot-haxby-anova-svm-py"><span class="std std-ref">Decoding with ANOVA + SVM: face vs house in the Haxby dataset</span></a>
For decoding without a precomputed mask</li>
<li><a class="reference internal" href="../decoding/space_net.html#space-net"><span class="std std-ref">SpaceNet: decoding with spatial structure for better maps</span></a></li>
</ul>
<hr class="docutils" />
<p><strong>Total running time of the script:</strong> ( 8 minutes  56.785 seconds)</p>
<div class="sphx-glr-footer docutils container">
<div class="sphx-glr-download docutils container">
<a class="reference download internal" href="../_downloads/plot_decoding_tutorial.py" download=""><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">plot_decoding_tutorial.py</span></code></a></div>
<div class="sphx-glr-download docutils container">
<a class="reference download internal" href="../_downloads/plot_decoding_tutorial.ipynb" download=""><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">plot_decoding_tutorial.ipynb</span></code></a></div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.readthedocs.io">Generated by Sphinx-Gallery</a></p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a></li>
        <li class="right" >
          <a href="01_plotting/plot_atlas.html" title="8.2.1. Basic Atlas plotting"
             >next</a> |</li>
        <li class="right" >
          <a href="plot_3d_and_4d_niimg.html" title="8.1.3. 3D and 4D niimgs: handling and visualizing"
             >previous</a> |</li>
<li><a href="../index.html">Nilearn Home</a> |&nbsp;</li>
<li><a href="../user_guide.html">User Guide</a> |&nbsp;</li>
<li><a href="index.html">Examples</a> |&nbsp;</li>
<li><a href="../modules/reference.html">Reference</a> |&nbsp;</li>
<li id="navbar-about"><a href="../authors.html">About</a>|&nbsp;</li>
<li id="navbar-ecosystem"><a href="http://www.nipy.org/">Nipy ecosystem</a></li>

          <li class="nav-item nav-item-1"><a href="../user_guide.html" >User guide: table of contents</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >8. Nilearn usage examples</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer">
            &copy; The nilearn developers 2010-2015.
          Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.7.0.
        <span style="padding-left: 5ex;">
          <a href="../_sources/auto_examples/plot_decoding_tutorial.rst.txt"
        	 rel="nofollow">Show this page source</a>
        </span>
    </div>
  </body>
</html>