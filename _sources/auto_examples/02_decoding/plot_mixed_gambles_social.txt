

.. _sphx_glr_auto_examples_02_decoding_plot_mixed_gambles_social.py:


SpaceNet on Jimura et al "mixed gambles" dataset.
==================================================

The segmenting power of SpaceNet is quite visible here.

See also the SpaceNet documentation: :ref:`space_net`.


.. code-block:: python

    # author: DOHMATOB Elvis Dopgima,
    #         GRAMFORT Alexandre








Load the data from the Jimura mixed-gamble experiment


.. code-block:: python

    from nilearn.datasets import fetch_mixed_gambles
    data = fetch_mixed_gambles(n_subjects=16)

    zmap_filenames = data.zmaps
    behavioral_target = data.gain
    mask_filename = data.mask_img


    from nilearn.plotting import plot_stat_map, show
    from nilearn.decoding import SpaceNetRegressor
    import time

    for penalty in ('tv-l1', 'graph-net', 'social'):
        decoder = SpaceNetRegressor(mask=mask_filename, penalty=penalty,
                                    eps=1e-1, verbose=10,
                                    memory="nilearn_cache")

        t0 = time.time()
        decoder.fit(zmap_filenames, behavioral_target)
        elapsed = time.time() - t0
        title = "%s; time: %.1fs" % (penalty, elapsed)

        # Visualize weights
        display = plot_stat_map(decoder.coef_img_, title=title,
                                display_mode="yz", cut_coords=[20, -2])
        display.savefig('poldrack_%s.png' % penalty)

    show




.. code-block:: pytb

    Traceback (most recent call last):
      File "/home/varoquau/dev/nilearn/doc/sphinxext/sphinx_gallery/gen_rst.py", line 467, in execute_script
        exec(code_block, example_globals)
      File "<string>", line 16, in <module>
      File "/home/varoquau/dev/nilearn/nilearn/decoding/space_net.py", line 1299, in __init__
        target_affine=target_affine, verbose=verbose)
      File "/home/varoquau/dev/nilearn/nilearn/decoding/space_net.py", line 684, in __init__
        self.check_params()
      File "/home/varoquau/dev/nilearn/nilearn/decoding/space_net.py", line 711, in check_params
        self.SUPPORTED_PENALTIES[-1], self.penalty))
    ValueError: 'penalty' parameter must be one of graph-net or tv-l1; got social




**Total running time of the script:**
(0 minutes 0.000 seconds)



.. container:: sphx-glr-download

    **Download Python source code:** :download:`plot_mixed_gambles_social.py <plot_mixed_gambles_social.py>`


.. container:: sphx-glr-download

    **Download IPython notebook:** :download:`plot_mixed_gambles_social.ipynb <plot_mixed_gambles_social.ipynb>`
